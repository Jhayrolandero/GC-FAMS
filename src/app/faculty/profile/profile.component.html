<app-loading-screen
  *ngIf="!(facultyProfile$ | async) as facultyProfile"
></app-loading-screen>
<div
  *ngIf="facultyProfile$ | async as facultyProfile"
  class="p-5 flex flex-col max-w-full flex-initial gap-3 text-blue overflow-x-hidden"
  id="mainPage"
>
  <div
    class="min-w-mobileL w-full bg-white rounded-[15px] overflow-hidden shadow-main"
  >
    <!-- IMAGE AND COVER -->
    <div class="w-full">
      <div class="h-[210px] w-full flex justify-center tablet:block">
        <div
          class="rounded-full ml-0 absolute tablet:ml-7 bg-white max-h-[210px] max-w-[210px] overflow-hidden border-[5px] border-white"
        >
          <img
            [src]="port + facultyProfile.profile_image"
            onerror="this.onerror=null; this.src='../../../assets/profiles/user.png'"
          />
          <!-- <button class="absolute bottom-0 right-5">Edit</button> -->
        </div>
        <div class="w-full h-[180px] overflow-hidden flex items-center">
          <img
            class="w-full"
            [src]="port + facultyProfile.cover_image"
            onerror="this.onerror=null; this.src='../../../assets/profiles/cover.jpg'"
          />
        </div>
      </div>
    </div>

    <div
      class="flex flex-col justify-center tablet:flex-row tablet:justify-between"
    >
      <p
        class="mobileS:text-[1.5rem] tablet:text-[2rem] text-center tablet:text-start font-Poppins font-semibold ml-0 tablet:ml-7 mt-1 mb-2"
      >
        {{ facultyProfile.first_name }} {{ facultyProfile.last_name }}
      </p>
    </div>
  </div>

  <div class="flex flex-col laptop:flex-row gap-4">
    <div
      class="hidden laptop:flex laptop:w-[200px] p-5 items-center bg-white rounded-[15px] shadow-main"
    >
      <img class="" src="../../../assets/college-logo-big/CCS.png" />
    </div>

    <div
      class="bg-white rounded-[15px] shadow-main flex flex-col tablet:flex-row p-5"
    >
      <div class="mr-[50px]">
        <p class="font-Poppins font-semibold text-[1.6rem]">Personal</p>
        <hr class="h-[2px] bg-mainGray" />
        <div class="flex flex-row">
          <div class="font-Roboto font-bold mr-10 text-black [&_p]:my-2">
            <p>Birthdate</p>
            <p>Age</p>
            <p>Citizenship</p>
            <p>Civil Status</p>
            <p>Sex</p>
          </div>
          <div class="font-Roboto font-regular text-black [&_p]:my-2">
            <p>{{ facultyProfile.birthdate }}</p>
            <p>{{ facultyProfile.age }}</p>
            <p>{{ facultyProfile.citizenship }}</p>
            <p>{{ facultyProfile.civil_status }}</p>
            <p>{{ facultyProfile.sex }}</p>
          </div>
        </div>
      </div>
      <div class="">
        <p class="font-Poppins font-semibold text-[1.6rem]">Contact</p>
        <hr class="h-[2px] bg-mainGray" />
        <p class="font-Roboto font-regular text-black my-2 text-[1.0rem]">
          {{ facultyProfile.email }}
        </p>
        <p class="font-Roboto font-regular text-black my-2 text-[1.0rem]">
          09684949573
        </p>
      </div>
    </div>

    <div
      class="bg-white rounded-[15px] shadow-main flex flex-1 flex-col tablet:flex-row p-5"
    >
      <div class="w-full">
        <div class="flex flex-row justify-between">
          <p class="text-[1.6rem] font-Roboto font-semibold">Courses Handled</p>
          <div>
            <div
              (click)="openDialogue()"
              class="w-[80px] h-[28px] rounded-[15px] bg-blue hover:shadow-main hover:scale-[102%] hover:duration-300 duration:300 flex justify-center items-center"
            >
              <svg
                width="25"
                height="25"
                viewBox="0 0 30 31"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clip-path="url(#clip0_984_350)">
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M11.25 6.75C11.25 6.08696 11.5134 5.45107 11.9822 4.98223C12.4511 4.51339 13.087 4.25 13.75 4.25H16.25C16.913 4.25 17.5489 4.51339 18.0178 4.98223C18.4866 5.45107 18.75 6.08696 18.75 6.75V11.75H23.75C24.413 11.75 25.0489 12.0134 25.5178 12.4822C25.9866 12.9511 26.25 13.587 26.25 14.25V16.75C26.25 17.413 25.9866 18.0489 25.5178 18.5178C25.0489 18.9866 24.413 19.25 23.75 19.25H18.75V24.25C18.75 24.913 18.4866 25.5489 18.0178 26.0178C17.5489 26.4866 16.913 26.75 16.25 26.75H13.75C13.087 26.75 12.4511 26.4866 11.9822 26.0178C11.5134 25.5489 11.25 24.913 11.25 24.25V19.25H6.25C5.58696 19.25 4.95107 18.9866 4.48223 18.5178C4.01339 18.0489 3.75 17.413 3.75 16.75V14.25C3.75 13.587 4.01339 12.9511 4.48223 12.4822C4.95107 12.0134 5.58696 11.75 6.25 11.75H11.25V6.75Z"
                    fill="#FFFFFF"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_984_350">
                    <rect
                      width="30"
                      height="30"
                      fill="white"
                      transform="translate(0 0.5)"
                    />
                  </clipPath>
                </defs>
              </svg>
            </div>
          </div>
        </div>

        <div
          class="w-[93%] max-h-[32px] rounded-[15px] bg-white flex flex-row px-5 py-2 gap-4"
        >
          <p class="w-[20%] text-greenBar font-Roboto font-bold text-[0.9rem]">
            Course Code
          </p>
          <p class="w-[57%] text-greenBar font-Roboto font-bold text-[0.9rem]">
            Course Name
          </p>
          <p class="w-[10%] text-greenBar font-Roboto font-bold text-[0.9rem]">
            Unit
          </p>
          <p class="w-[10%] text-greenBar font-Roboto font-bold text-[0.9rem]">
            Count
          </p>
        </div>
        <div class="grid gap-y-2 h-[150px] overflow-y-scroll">
          <div
            *ngFor="let courseFa of coursesFaculty$ | async"
            class="w-full max-h-min rounded-[10px] bg-blue shadow-main flex flex-row justify-between flex-initial px-5 py-[7px] select-none duration-300 hover:bg-[#073871] hover:duration-300 mobileS:gap-4"
          >
            <div class="w-[93%] flex flex-row mobileS:gap-4">
              <p
                class="max-w-[15%] tablet:w-[20%] text-white font-Roboto font-medium text-[0.8rem]"
              >
                {{ courseFa.course_code }}
              </p>
              <p
                class="w-[60%] text-white font-Roboto font-medium text-[0.8rem]"
              >
                {{ courseFa.course_name }}
              </p>
              <p
                class="w-[10%] text-white font-Roboto font-medium text-[0.8rem]"
              >
                {{ courseFa.unit }}
              </p>
              <p
                class="w-[10%] text-white font-Roboto font-medium text-[0.8rem]"
              >
                {{ courseFa.class_count }}
              </p>
            </div>

            <div>
              <svg
                (click)="deleteDialog(courseFa.course_code)"
                class="[&>path]:hover:fill-red-500 mobileS:scale-75 tablet:hover:scale-[101%] hover:duration-300 duration-300"
                width="23"
                height="25"
                viewBox="0 0 33 35"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M31.2812 5.875H24.5625V4.5625C24.5625 3.51821 24.1378 2.51669 23.3818 1.77827C22.6258 1.03984 21.6004 0.625 20.5312 0.625H12.4688C11.3996 0.625 10.3742 1.03984 9.61823 1.77827C8.86222 2.51669 8.4375 3.51821 8.4375 4.5625V5.875H1.71875C1.36237 5.875 1.02058 6.01328 0.768576 6.25942C0.516574 6.50556 0.375 6.8394 0.375 7.1875C0.375 7.5356 0.516574 7.86944 0.768576 8.11558C1.02058 8.36172 1.36237 8.5 1.71875 8.5H3.0625V32.125C3.0625 32.8212 3.34565 33.4889 3.84965 33.9812C4.35365 34.4734 5.03723 34.75 5.75 34.75H27.25C27.9628 34.75 28.6463 34.4734 29.1503 33.9812C29.6544 33.4889 29.9375 32.8212 29.9375 32.125V8.5H31.2812C31.6376 8.5 31.9794 8.36172 32.2314 8.11558C32.4834 7.86944 32.625 7.5356 32.625 7.1875C32.625 6.8394 32.4834 6.50556 32.2314 6.25942C31.9794 6.01328 31.6376 5.875 31.2812 5.875ZM13.8125 25.5625C13.8125 25.9106 13.6709 26.2444 13.4189 26.4906C13.1669 26.7367 12.8251 26.875 12.4688 26.875C12.1124 26.875 11.7706 26.7367 11.5186 26.4906C11.2666 26.2444 11.125 25.9106 11.125 25.5625V15.0625C11.125 14.7144 11.2666 14.3806 11.5186 14.1344C11.7706 13.8883 12.1124 13.75 12.4688 13.75C12.8251 13.75 13.1669 13.8883 13.4189 14.1344C13.6709 14.3806 13.8125 14.7144 13.8125 15.0625V25.5625ZM21.875 25.5625C21.875 25.9106 21.7334 26.2444 21.4814 26.4906C21.2294 26.7367 20.8876 26.875 20.5312 26.875C20.1749 26.875 19.8331 26.7367 19.5811 26.4906C19.3291 26.2444 19.1875 25.9106 19.1875 25.5625V15.0625C19.1875 14.7144 19.3291 14.3806 19.5811 14.1344C19.8331 13.8883 20.1749 13.75 20.5312 13.75C20.8876 13.75 21.2294 13.8883 21.4814 14.1344C21.7334 14.3806 21.875 14.7144 21.875 15.0625V25.5625ZM21.875 5.875H11.125V4.5625C11.125 4.2144 11.2666 3.88056 11.5186 3.63442C11.7706 3.38828 12.1124 3.25 12.4688 3.25H20.5312C20.8876 3.25 21.2294 3.38828 21.4814 3.63442C21.7334 3.88056 21.875 4.2144 21.875 4.5625V5.875Z"
                  fill="#BCBCBC"
                />
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
  (click)="updateCV()"
  class="shadow-main bg-white rounded-[15px] overflow-hidden hover:scale-[101%] hover:text-white hover:bg-blue hover:duration-300 duration-300 select-none flex flex-col justify-center items-center"
  >
    <p class="text-[1.5rem] font-Poppins font-semibold">Update CV</p>
  </div>

  <div class="w-full flex flex-col overflow-y-hidden">
    <mat-tab-group>
      <mat-tab label="Add CV Details">
        <div class="w-full mt-2">
          <app-cv-dropdown
            *ngFor="let comp of components"
            [name]="comp"
          ></app-cv-dropdown>
        </div>
      </mat-tab>
      <mat-tab label="View CV" class="bg-black">
        <div *ngIf="facultyProfile$ | async as facultyProfile" class="mt-2">
          <ngx-doc-viewer
            [url]="
              port +
              '/GC-FaMS-API/CV_Assets/' +
              facultyProfile.faculty_ID +
              '.pdf'
            "
            viewer="url"
            style="width: 100%; height: 100vh"
          ></ngx-doc-viewer>
        </div>
      </mat-tab>
    </mat-tab-group>
    <!-- <div class="w-full mr-2">
      <app-cv-dropdown
        *ngFor="let comp of components"
        [name]="comp"
      ></app-cv-dropdown>
    </div> -->
  </div>
</div>
